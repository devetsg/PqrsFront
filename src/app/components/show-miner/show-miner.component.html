<section class="result">
    <div class="result-container">
        <div *ngIf="data.area == 'FAC'" class="dialog--container-texts">
            <h2 class="dialog--container-texts-title">Minería de Facturacion</h2>
        </div>
        <div *ngIf="data.area == 'OP'" class="dialog--container-texts">
            <h2 class="dialog--container-texts-title">Minería de Operacion</h2>
        </div>
        <div *ngIf="data.area == 'TS'" class="dialog--container-texts">
            <h2 class="dialog--container-texts-title">Minería de Transporte</h2>
        </div>
        <div class="result-container-data">
            <div  class="result-container-data-obs">
                <h4 class="result-container-data-title">Solicitud Realizada</h4>
                <h4 class="result-container-data-date">
                    <span *ngIf="data.area == 'FAC'">
                        {{pqr.dateSendToMinerFac | date}}
                    </span>
                    <span *ngIf="data.area == 'OP'">
                        {{pqr.dateSendToMinerOp | date}}
                    </span>
                    <span *ngIf="data.area == 'TS'">
                        {{pqr.dateSendToMinerTs | date}}
                    </span>
                </h4>
                <h4 class="result-container-data-content">
                    <span *ngIf="data.area == 'FAC'">
                        {{pqr.observationToMinerFac}}
                    </span>
                    <span *ngIf="data.area == 'OP'">
                        {{pqr.observationToMinerOp}}
                    </span>
                    <span *ngIf="data.area == 'TS'">
                        {{pqr.observationToMinerTs}}
                    </span>
                    
                </h4>
            </div>
            <div  *ngIf="pqr.observationFromMinerFac != null ||  pqr.observationFromMinerOp != null 
                || pqr.observationFromMinerTs != null" class="result-container-data-obs">
                <h4 class="result-container-data-title">Respuesta</h4>
                <h4 class="result-container-data-date">
                    <span *ngIf="data.area == 'FAC'">
                        {{pqr.dateResponseMinerFac | date}}
                    </span>
                    <span *ngIf="data.area == 'OP'">
                        {{pqr.dateResponseMinerOp | date}}
                    </span>
                    <span *ngIf="data.area == 'TS'">
                        {{pqr.dateResponseMinerTs | date}}
                    </span>
                </h4>
                <h4 class="result-container-data-content">
                    <span *ngIf="data.area == 'FAC'">
                        {{pqr.observationFromMinerFac != null ? pqr.observationFromMinerFac : 'El area asignada no ha enviado una respuesta'}}
                    </span>
                    <span *ngIf="data.area == 'OP'">
                        {{pqr.observationFromMinerOp != null ? pqr.observationFromMinerOp : 'El area asignada no ha enviado una respuesta'}}
                    </span>
                    <span *ngIf="data.area == 'TS'">
                        {{pqr.observationFromMinerTs != null ? pqr.observationFromMinerTs : 'El area asignada no ha enviado una respuesta'}}
                    </span>
                    
                </h4>
            </div>
            <div  class="response--headers-container-data cont">
                <!-- <h2 class="response--labels">Adjuntos</h2><br/> -->
                <!-- <div class="response--labels-data-attachments"> -->
                  <div *ngIf="pqr.minerUrlsFac != null">
                    <div *ngIf="data.area == 'FAC' && pqr.minerUrlsFac.length > 0">
                        <h2 style="margin-bottom: 15px;" class="response--labels">Datos Minados: <i style="font-size: 25px;" class="bi bi-minecart-loaded"></i></h2>        
                        <div *ngFor="let name of minedAttachmentsFac" class="response--labels-data flex div-doc">
                          <div class="flex" (click)="getAttach(name)">
                            <img [src]="getIcon(name)" alt="Icon" style="width: 30px; height: 30px; margin-right: 10px;">
                            {{ truncateFilename(name.replace('Resources/Attach/', ''), 20) }}
                          </div>
                        </div>
                      </div>
                  </div>  
                  <div *ngIf="pqr.minerUrlsOp != undefined && (data.area == 'OP' && pqr.minerUrlsOp.length > 0)">
                    <h2 style="margin-bottom: 15px;" class="response--labels">Datos Minados: <i style="font-size: 25px;" class="bi bi-minecart-loaded"></i></h2>        
                    <div *ngFor="let name of minedAttachmentsOp" class="response--labels-data flex div-doc">
                      <div class="flex" (click)="getAttach(name)">
                        <img [src]="getIcon(name)" alt="Icon" style="width: 30px; height: 30px; margin-right: 10px;">
                        {{ truncateFilename(name.replace('Resources/Attach/', ''), 20) }}
                      </div>
                    </div>
                  </div>
                  <div *ngIf="pqr.minerUrlsTs != undefined && (data.area == 'TS' && pqr.minerUrlsTs.length > 0)">
                    <h2 style="margin-bottom: 15px;" class="response--labels">Datos Minados: <i style="font-size: 25px;" class="bi bi-minecart-loaded"></i></h2>        
                    <div *ngFor="let name of minedAttachmentsTs" class="response--labels-data flex div-doc">
                      <div class="flex" (click)="getAttach(name)">
                        <img [src]="getIcon(name)" alt="Icon" style="width: 30px; height: 30px; margin-right: 10px;">
                        {{ truncateFilename(name.replace('Resources/Attach/', ''), 20) }}
                      </div>
                    </div>
                  </div>   
                <!-- </div> -->
            </div>
            <div *ngIf="isAudio" class="response--audio-container">
                <button (click)="play()" class="response--audio-container-btn" [disabled]="isPlaying">
                  <i class="bi bi-play-circle-fill response--audio-container-btn-icon"></i>
                </button>
                <button (click)="stop()" class="response--audio-container-btn" [disabled]="!isPlaying">
                  <i class="bi bi-stop-circle-fill response--audio-container-btn-icon"></i>
                </button>
              </div>
            <div class="response--visors-container-visor">
                <!--<app-file-viewer *ngIf="pdfSrc.length > 0" [fileUrl]="pdfSrc"></app-file-viewer>-->
                <div *ngIf="pdfSrc">
                  <object [attr.data]="pdfSrc" type="application/pdf" width="100%" height="600px">                   
                    <p>
                      Tu navegador no soporta la visualización de PDF. Puedes
                      <a [href]="pdfSrc">descargar el archivo aquí</a>.
                    </p>
                  </object>

                </div>
                <div class="response--visors-container-visor-excel">
                  <app-file-viewer-excel *ngIf="excelSrc != false" [fileUrl]="excelSrc!.toString()"></app-file-viewer-excel>
                </div>
            </div>

        </div>
    </div>
</section>
<ng-template #noResponse>
    <span>Esperando respuesta del area asignada</span>
</ng-template>